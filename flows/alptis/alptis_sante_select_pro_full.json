{
  "version": 1,
  "platform": "alptis",
  "slug": "alptis_sante_select_pro_full",
  "name": "Alptis Santé Select – Informations projet complet",
  "active": true,
  "steps": [
    { "type": "goto", "url": "https://pro.alptis.org/", "screenshot_label": "accueil", "timeout_ms": 15000 },
    { "type": "waitFor", "selector": "#username", "screenshot_label": "login-form", "timeout_ms": 10000 },
    { "type": "fill", "selector": "#username", "value": "{username}", "screenshot_label": "fill-user" },
    { "type": "fill", "selector": "#password", "value": "{password}", "screenshot_label": "fill-pass" },
    { "type": "tryClick", "selector": "#axeptio_btn_acceptAll", "timeout_ms": 5000, "screenshot_label": "accept-axeptio-login" },
    { "type": "sleep", "timeout_ms": 800, "screenshot_label": "wait-after-axeptio-login" },
    { "type": "click", "selector": "button[type=\"submit\"]", "screenshot_label": "submit" },
    { "type": "goto", "url": "https://pro.alptis.org/sante-select/informations-projet/", "screenshot_label": "goto-infos-projet" },
    { "type": "sleep", "timeout_ms": 1500, "screenshot_label": "post-goto-wait" },
    { "type": "tryClick", "selector": "#axeptio_overlay #axeptio_btn_acceptAll", "timeout_ms": 5000, "screenshot_label": "accept-axeptio-page" },
    { "type": "sleep", "timeout_ms": 800, "screenshot_label": "wait-after-axeptio-page" },
    { "type": "waitFor", "selector": ".page-layout.informations-projet", "screenshot_label": "infos-projet-ready", "timeout_ms": 10000 },

    { "type": "fill", "selector": "#dateEffet input[data-test=\"input\"]", "value": "01/10/2025", "screenshot_label": "fill-date-effet" },
    { "type": "sleep", "timeout_ms": 500, "screenshot_label": "wait-after-date-effet" },

    { "type": "click", "selector": ".section-adherent span[data-test=\"radio\"][value=\"MADAME\"] label", "screenshot_label": "civilite-madame" },
    { "type": "fill", "selector": "#nom", "value": "Durand", "screenshot_label": "fill-nom" },
    { "type": "fill", "selector": "#prenom", "value": "Camille", "screenshot_label": "fill-prenom" },
    { "type": "fill", "selector": "#date-naissance-adherent input[data-test=\"input\"]", "value": "01/01/1985", "screenshot_label": "fill-naissance-adherent" },
    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]", "screenshot_label": "open-categorie-adherent" },
    { "type": "sleep", "timeout_ms": 500, "screenshot_label": "wait-categorie-adherent" },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Cadres\")", "screenshot_label": "select-categorie-adherent" },
    { "type": "sleep", "timeout_ms": 300, "screenshot_label": "wait-after-categorie" },
    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner un régime obligatoire\"]", "screenshot_label": "open-regime-adherent" },
    { "type": "sleep", "timeout_ms": 500, "screenshot_label": "wait-regime-adherent" },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Sécurité sociale\")", "screenshot_label": "select-regime-adherent" },
    { "type": "fill", "selector": "input#codePostal", "value": "69001", "screenshot_label": "fill-code-postal" },
    { "type": "screenshot", "screenshot_label": "section-adherent" },

    { "type": "click", "selector": ".totem-section__header-title:has-text(\"Conjoint(e)\")", "screenshot_label": "focus-conjoint" },
    { "type": "sleep", "timeout_ms": 300, "screenshot_label": "wait-focus-conjoint" },
    { "type": "click", "selector": ".totem-section__header:has(.totem-section__header-title:has-text(\"Conjoint(e)\")) label[data-test=\"label\"]", "screenshot_label": "toggle-conjoint-oui" },
    { "type": "waitFor", "selector": ".totem-section:has(.totem-section__header-title:has-text(\"Conjoint(e)\")) .totem-toggle.totem-toggle--on", "screenshot_label": "wait-toggle-conjoint-on", "timeout_ms": 3000 },
    { "type": "fill", "selector": "#date-naissance-conjoint input[data-test=\"input\"]", "value": "02/02/1986", "screenshot_label": "fill-naissance-conjoint" },
    { "type": "click", "selector": ".sel-c-conjoint-content .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]", "screenshot_label": "open-categorie-conjoint" },
    { "type": "sleep", "timeout_ms": 500, "screenshot_label": "wait-categorie-conjoint" },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Cadres\")", "screenshot_label": "select-categorie-conjoint" },
    { "type": "sleep", "timeout_ms": 300, "screenshot_label": "wait-after-categorie-conjoint" },
    { "type": "click", "selector": ".sel-c-conjoint-content .totem-select__input input[placeholder=\"Sélectionner un régime obligatoire\"]", "screenshot_label": "open-regime-conjoint" },
    { "type": "sleep", "timeout_ms": 500, "screenshot_label": "wait-regime-conjoint" },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Sécurité sociale\")", "screenshot_label": "select-regime-conjoint" },
    { "type": "screenshot", "screenshot_label": "section-conjoint" },

    { "type": "click", "selector": ".totem-section__header-title:has-text(\"Enfants(s)\")", "screenshot_label": "focus-enfants" },
    { "type": "sleep", "timeout_ms": 300, "screenshot_label": "wait-focus-enfants" },
    { "type": "click", "selector": ".totem-section__header:has(.totem-section__header-title:has-text(\"Enfants\")) label[data-test=\"label\"]", "screenshot_label": "toggle-enfants-oui" },
    { "type": "waitFor", "selector": ".totem-section:has(.totem-section__header-title:has-text(\"Enfants\")) .totem-toggle.totem-toggle--on", "screenshot_label": "wait-toggle-enfants-on", "timeout_ms": 3000 },
    { "type": "waitFor", "selector": ".totem-section:has(.totem-section__header-title:has-text(\"Enfants\")) button:has-text(\"Ajouter un enfant\")", "screenshot_label": "wait-enfants-button", "timeout_ms": 7000 },

    { "type": "fill", "selector": "#date-naissance-enfant-0 input[data-test=\"input\"]", "value": "05/05/2010", "screenshot_label": "fill-naissance-enfant-1" },
    { "type": "click", "selector": ".sub-section-enfant:nth-of-type(1) .totem-select__input input[placeholder=\"Sélectionner un régime obligatoire\"]", "screenshot_label": "open-regime-enfant-1" },
    { "type": "sleep", "timeout_ms": 500, "screenshot_label": "wait-regime-enfant-1" },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Sécurité sociale\")", "screenshot_label": "select-regime-enfant-1" },

    { "type": "waitFor", "selector": "button:has-text(\"Ajouter un enfant\"):not([disabled])", "screenshot_label": "wait-add-enfant-enabled", "timeout_ms": 7000 },
    { "type": "click", "selector": "button:has-text(\"Ajouter un enfant\")", "screenshot_label": "click-add-enfant-2" },
    { "type": "waitFor", "selector": "#date-naissance-enfant-1 input[data-test=\"input\"]", "screenshot_label": "wait-enfant-2-fields", "timeout_ms": 7000 },
    { "type": "fill", "selector": "#date-naissance-enfant-1 input[data-test=\"input\"]", "value": "06/06/2012", "screenshot_label": "fill-naissance-enfant-2" },
    { "type": "click", "selector": ".sub-section-enfant:nth-of-type(2) .totem-select__input input[placeholder=\"Sélectionner un régime obligatoire\"]", "screenshot_label": "open-regime-enfant-2" },
    { "type": "sleep", "timeout_ms": 500, "screenshot_label": "wait-regime-enfant-2" },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Sécurité sociale\")", "screenshot_label": "select-regime-enfant-2" },

    { "type": "waitFor", "selector": "button:has-text(\"Ajouter un enfant\"):not([disabled])", "screenshot_label": "wait-add-enfant2-enabled", "timeout_ms": 7000 },
    { "type": "click", "selector": "button:has-text(\"Ajouter un enfant\")", "screenshot_label": "click-add-enfant-3" },
    { "type": "waitFor", "selector": "#date-naissance-enfant-2 input[data-test=\"input\"]", "screenshot_label": "wait-enfant-3-fields", "timeout_ms": 7000 },
    { "type": "fill", "selector": "#date-naissance-enfant-2 input[data-test=\"input\"]", "value": "07/07/2014", "screenshot_label": "fill-naissance-enfant-3" },
    { "type": "click", "selector": ".sub-section-enfant:nth-of-type(3) .totem-select__input input[placeholder=\"Sélectionner un régime obligatoire\"]", "screenshot_label": "open-regime-enfant-3" },
    { "type": "sleep", "timeout_ms": 500, "screenshot_label": "wait-regime-enfant-3" },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Sécurité sociale\")", "screenshot_label": "select-regime-enfant-3" },
    { "type": "screenshot", "screenshot_label": "section-enfants" },

    { "type": "screenshot", "screenshot_label": "form-complet" }
  ]
}
