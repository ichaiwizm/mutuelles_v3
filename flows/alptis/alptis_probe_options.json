{
  "version": 1,
  "platform": "alptis",
  "slug": "alptis_probe_options",
  "name": "Probe options Alptis — categories/régimes + dépendances visibles",
  "active": true,
  "steps": [
    { "type": "goto", "url": "https://pro.alptis.org/", "screenshot_label": "accueil", "timeout_ms": 15000 },
    { "type": "waitFor", "selector": "#username", "screenshot_label": "login-form", "timeout_ms": 10000 },
    { "type": "fill", "selector": "#username", "value": "{username}", "screenshot_label": "fill-user" },
    { "type": "fill", "selector": "#password", "value": "{password}", "screenshot_label": "fill-pass" },
    { "type": "tryClick", "selector": "#axeptio_btn_acceptAll", "timeout_ms": 5000, "screenshot_label": "accept-axeptio-login" },
    { "type": "sleep", "timeout_ms": 600, "screenshot_label": "post-axeptio-login" },
    { "type": "click", "selector": "button[type=\"submit\"]", "screenshot_label": "submit" },

    { "type": "goto", "url": "https://pro.alptis.org/sante-select/informations-projet/", "screenshot_label": "goto-infos" },
    { "type": "sleep", "timeout_ms": 1200, "screenshot_label": "post-goto" },
    { "type": "tryClick", "selector": "#axeptio_overlay #axeptio_btn_acceptAll", "timeout_ms": 5000, "screenshot_label": "accept-axeptio-page" },
    { "type": "sleep", "timeout_ms": 600, "screenshot_label": "post-axeptio-page" },
    { "type": "waitFor", "selector": ".page-layout.informations-projet", "screenshot_label": "infos-ready", "timeout_ms": 10000 },

    { "type": "fill", "selector": "#dateEffet input[data-test=\"input\"]", "value": "01/10/2025", "screenshot_label": "fill-date-effet" },
    { "type": "sleep", "timeout_ms": 400 },

    { "type": "fill", "selector": "#nom", "value": "Durand", "screenshot_label": "fill-nom" },
    { "type": "fill", "selector": "#prenom", "value": "Camille", "screenshot_label": "fill-prenom" },
    { "type": "fill", "selector": "#date-naissance-adherent input[data-test=\"input\"]", "value": "01/01/1985", "screenshot_label": "fill-naissance-adherent" },
    { "type": "fill", "selector": "input#codePostal", "value": "69001", "screenshot_label": "fill-cp" },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]", "screenshot_label": "open-categorie-adherent" },
    { "type": "sleep", "timeout_ms": 600, "screenshot_label": "options-categorie-adherent" },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]", "screenshot_label": "cat-open-1" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Agriculteurs exploitants\")", "screenshot_label": "cat-Agriculteurs-exploitants" },
    { "type": "sleep", "timeout_ms": 400 },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]", "screenshot_label": "cat-open-2" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Artisans\")", "screenshot_label": "cat-Artisans" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Cadres\")", "screenshot_label": "cat-Cadres" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Cadres et employés de la fonction publique\")", "screenshot_label": "cat-Cadres-FP" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Chefs d'entreprise\")", "screenshot_label": "cat-Chefs-entreprise" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Commerçants et assimilés\")", "screenshot_label": "cat-Commercants" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Employés, agents de maîtrise\")", "screenshot_label": "cat-Employes" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Ouvriers\")", "screenshot_label": "cat-Ouvriers" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Personnes sans activité professionnelle\")", "screenshot_label": "cat-Sans-activite" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Professions libérales et assimilés\")", "screenshot_label": "cat-Professions-liberales" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Retraités\")", "screenshot_label": "cat-Retraites" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner un régime obligatoire\"]", "screenshot_label": "open-regime-adherent" },
    { "type": "sleep", "timeout_ms": 600, "screenshot_label": "options-regime-adherent" },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner un régime obligatoire\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Alsace / Moselle\")", "screenshot_label": "reg-Alsace-Moselle" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner un régime obligatoire\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Amexa\")", "screenshot_label": "reg-Amexa" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner un régime obligatoire\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Régime des salariés agricoles\")", "screenshot_label": "reg-Salaries-agricoles" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner un régime obligatoire\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Sécurité sociale\")", "screenshot_label": "reg-Securite-sociale" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".section-adherent .totem-select__input input[placeholder=\"Sélectionner un régime obligatoire\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Sécurité sociale des indépendants\")", "screenshot_label": "reg-SSI" },
    { "type": "sleep", "timeout_ms": 400 },

    { "type": "click", "selector": ".totem-section__header-title:has-text(\"Conjoint(e)\")", "screenshot_label": "focus-conjoint" },
    { "type": "sleep", "timeout_ms": 250 },
    { "type": "click", "selector": ".totem-section__header:has(.totem-section__header-title:has-text(\"Conjoint(e)\")) label[data-test=\"label\"]", "screenshot_label": "toggle-conjoint-oui" },
    { "type": "waitFor", "selector": ".totem-section:has(.totem-section__header-title:has-text(\"Conjoint(e)\")) .totem-toggle.totem-toggle--on", "timeout_ms": 3000, "screenshot_label": "conjoint-on" },

    { "type": "click", "selector": ".sel-c-conjoint-content .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]", "screenshot_label": "open-categorie-conjoint" },
    { "type": "sleep", "timeout_ms": 600, "screenshot_label": "options-categorie-conjoint" },

    { "type": "click", "selector": ".sel-c-conjoint-content .totem-select__input input[placeholder=\"Sélectionner une catégorie socioprofessionnelle\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Cadres\")", "screenshot_label": "conj-cat-Cadres" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".sel-c-conjoint-content .totem-select__input input[placeholder=\"Sélectionner un régime obligatoire\"]", "screenshot_label": "open-regime-conjoint" },
    { "type": "sleep", "timeout_ms": 600, "screenshot_label": "options-regime-conjoint" },

    { "type": "click", "selector": ".sel-c-conjoint-content .totem-select__input input[placeholder=\"Sélectionner un régime obligatoire\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Sécurité sociale\")", "screenshot_label": "conj-reg-SS" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "click", "selector": ".totem-section__header-title:has-text(\"Enfants\")", "screenshot_label": "focus-enfants" },
    { "type": "sleep", "timeout_ms": 250 },
    { "type": "click", "selector": ".totem-section__header:has(.totem-section__header-title:has-text(\"Enfants\")) label[data-test=\"label\"]", "screenshot_label": "toggle-enfants-oui" },
    { "type": "waitFor", "selector": ".totem-section:has(.totem-section__header-title:has-text(\"Enfants\")) .totem-toggle.totem-toggle--on", "timeout_ms": 3000, "screenshot_label": "enfants-on" },
    { "type": "waitFor", "selector": "button:has-text(\"Ajouter un enfant\"):not([disabled])", "timeout_ms": 7000, "screenshot_label": "btn-add-enfant-enabled" },

    { "type": "fill", "selector": "#date-naissance-enfant-0 input[data-test=\"input\"]", "value": "05/05/2010", "screenshot_label": "fill-naissance-enfant-1" },
    { "type": "click", "selector": ".sub-section-enfant:nth-of-type(1) .totem-select__input input[placeholder=\"Sélectionner un régime obligatoire\"]", "screenshot_label": "open-regime-enfant-1" },
    { "type": "sleep", "timeout_ms": 600, "screenshot_label": "options-regime-enfant-1" },

    { "type": "click", "selector": ".sub-section-enfant:nth-of-type(1) .totem-select__input input[placeholder=\"Sélectionner un régime obligatoire\"]" },
    { "type": "sleep", "timeout_ms": 300 },
    { "type": "click", "selector": "div.totem-select-option:has-text(\"Sécurité sociale\")", "screenshot_label": "enf1-reg-SS" },
    { "type": "sleep", "timeout_ms": 300 },

    { "type": "screenshot", "screenshot_label": "final" }
  ]
}

