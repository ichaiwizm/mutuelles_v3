{
  "platform": "alptis",
  "slug": "sante-select",
  "name": "Alptis - Santé Select (Login via Portail Pro)",
  "description": "Login sur pro.alptis.org (Keycloak), prêt pour étapes métiers.",
  "steps": [
    { "type": "comment", "text": "=== LOGIN PRO.ALPTIS ===" },
    {
      "type": "goto",
      "url": "https://pro.alptis.org/",
      "label": "Open Alptis Pro portal"
    },
    { "type": "sleep", "ms": 1500, "label": "Let redirects happen" },
    { "type": "click", "field": "consent.manage", "optional": true, "label": "Open cookies prefs (if visible)" },
    {
      "type": "click",
      "field": "consent.acceptAll",
      "optional": true,
      "label": "Accept cookies (if present)"
    },
    { "type": "waitGone", "field": "consent.overlay", "label": "Wait overlay gone" },
    { "type": "sleep", "ms": 400, "label": "Stabilize" },
    { "type": "waitField", "field": "auth.username", "label": "Wait username field" },
    { "type": "fill", "field": "auth.username", "value": "{credentials.username}", "label": "Fill username" },
    { "type": "fill", "field": "auth.password", "value": "{credentials.password}", "label": "Fill password" },
    { "type": "click", "field": "auth.submit", "optional": true, "label": "Submit login (click)" },
    { "type": "pressKey", "key": "Enter", "label": "Submit login (Enter fallback)" },
    { "type": "sleep", "ms": 4500, "label": "Wait post-login" },
    { "type": "comment", "text": "=== NAVIGATE TO SANTE SELECT ===" },
    { "type": "goto", "url": "https://pro.alptis.org/sante-select/informations-projet/", "label": "Go to product page" },
    { "type": "sleep", "ms": 1500, "label": "Wait product page" },
    { "type": "comment", "text": "=== FILL SUBSCRIBER INTO FORM ===" },
    { "type": "fill", "field": "product.lastName", "value": "{lead.subscriber.lastName}", "label": "Fill last name" },
    { "type": "fill", "field": "product.firstName", "value": "{lead.subscriber.firstName}", "label": "Fill first name" },
    { "type": "fill", "field": "product.birthDate", "value": "{lead.subscriber.birthDate}", "label": "Fill birth date" },
    { "type": "fill", "field": "product.postalCode", "value": "{lead.subscriber.postalCode}", "label": "Fill postal code" }
  ]
}
