{
  "platform": "alptis",
  "version": 1,
  "name": "Alptis - UI Form",
  "meta": {
    "description": "Définition UI complète pour Alptis en respectant des domainKey communs avec Swisslife.",
    "compat": "Les champs partagés utilisent exactement les mêmes domainKey: spouse.present, children.count, children[].birthDate, children[].regime, children[].ayantDroit, subscriber.* etc."
  },
  "sections": [
    {
      "id": "projet",
      "title": "Projet",
      "fields": [
        {
          "domainKey": "project.name",
          "leadKey": "projet.nom",
          "label": "Nom du projet",
          "widget": "text",
          "required": false,
          "defaultTemplate": "{lead.adherent.nom} {lead.adherent.prenom}",
          "placeholder": "Optionnel"
        },
        {
          "domainKey": "project.dateEffet",
          "leadKey": "projet.date_effet",
          "label": "Date d'effet",
          "widget": "date",
          "required": true,
          "format": "DD/MM/YYYY"
        }
      ]
    },
    {
      "id": "souscripteur",
      "title": "Souscripteur",
      "fields": [
        {
          "domainKey": "subscriber.civility",
          "leadKey": "adherent.civilite",
          "label": "Civilité",
          "widget": "select",
          "required": true,
          "options": [
            { "value": "MONSIEUR", "label": "Monsieur" },
            { "value": "MADAME", "label": "Madame" }
          ]
        },
        {
          "domainKey": "subscriber.lastName",
          "leadKey": "adherent.nom",
          "label": "Nom",
          "widget": "text",
          "required": true
        },
        {
          "domainKey": "subscriber.firstName",
          "leadKey": "adherent.prenom",
          "label": "Prénom",
          "widget": "text",
          "required": true
        },
        {
          "domainKey": "subscriber.birthDate",
          "leadKey": "adherent.date_naissance",
          "label": "Date de naissance",
          "widget": "date",
          "required": true,
          "format": "DD/MM/YYYY"
        },
        {
          "domainKey": "subscriber.category",
          "leadKey": "adherent.categorie",
          "label": "Catégorie socioprofessionnelle",
          "widget": "select",
          "required": false,
          "options": [
            { "value": "AGRICULTEURS_EXPLOITANTS", "label": "Agriculteurs exploitants" },
            { "value": "ARTISANS", "label": "Artisans" },
            { "value": "CADRES", "label": "Cadres" },
            { "value": "CADRES_EMPLOYES_FONCTION_PUBLIQUE", "label": "Cadres et employés de la fonction publique" },
            { "value": "CHEFS_D_ENTREPRISE", "label": "Chefs d'entreprise" },
            { "value": "COMMERCANTS_ET_ASSIMILES", "label": "Commerçants et assimilés" },
            { "value": "EMPLOYES", "label": "Employés, agents de maîtrise" },
            { "value": "OUVRIERS", "label": "Ouvriers" },
            { "value": "PERSONNES_SANS_ACTIVITE_PROFESSIONNELLE", "label": "Sans activité professionnelle" },
            { "value": "PROFESSIONS_LIBERALES_ET_ASSIMILES", "label": "Professions libérales et assimilés" },
            { "value": "RETRAITES", "label": "Retraités" }
          ]
        },
        {
          "domainKey": "subscriber.regime",
          "leadKey": "adherent.regime",
          "label": "Régime/Statut (plateforme)",
          "widget": "select",
          "required": true,
          "options": [
            { "value": "ALSACE_MOSELLE", "label": "Alsace / Moselle" },
            { "value": "AMEXA", "label": "Amexa" },
            { "value": "REGIME_SALARIES_AGRICOLES", "label": "Régime des salariés agricoles" },
            { "value": "SECURITE_SOCIALE", "label": "Sécurité sociale" },
            { "value": "SECURITE_SOCIALE_INDEPENDANTS", "label": "Sécurité sociale des indépendants" }
          ]
        },
        {
          "domainKey": "subscriber.status",
          "leadKey": "adherent.statut",
          "label": "Statut",
          "widget": "select",
          "required": false,
          "options": [
            { "value": "SALARIE", "label": "Salarié" },
            { "value": "TNS", "label": "TNS" },
            { "value": "FONCTIONNAIRE", "label": "Fonctionnaire" },
            { "value": "RETRAITE", "label": "Retraité" },
            { "value": "LIBERAL", "label": "Libéral" },
            { "value": "INDEPENDANT", "label": "Indépendant" }
          ]
        },
        {
          "domainKey": "subscriber.profession",
          "leadKey": "adherent.profession",
          "label": "Profession",
          "widget": "text",
          "required": false
        },
        {
          "domainKey": "subscriber.postalCode",
          "leadKey": "adherent.code_postal",
          "label": "Code postal",
          "widget": "text",
          "required": true,
          "validations": { "pattern": "^\\d{5}$" },
          "placeholder": "Ex: 69000"
        }
      ]
    },
    {
      "id": "conjoint",
      "title": "Conjoint",
      "fields": [
        {
          "domainKey": "spouse.present",
          "leadKey": "conjoint.present",
          "label": "Conjoint présent",
          "widget": "toggle",
          "required": false,
          "default": false
        },
        {
          "domainKey": "spouse.birthDate",
          "leadKey": "conjoint.date_naissance",
          "label": "Date de naissance du conjoint",
          "widget": "date",
          "required": false,
          "format": "DD/MM/YYYY",
          "visibleWhen": { "equals": { "spouse.present": true } }
        },
        {
          "domainKey": "spouse.regime",
          "leadKey": "conjoint.regime",
          "label": "Régime (conjoint)",
          "widget": "select",
          "required": false,
          "visibleWhen": { "equals": { "spouse.present": true } },
          "options": [
            { "value": "ALSACE_MOSELLE", "label": "Alsace / Moselle" },
            { "value": "AMEXA", "label": "Amexa" },
            { "value": "REGIME_SALARIES_AGRICOLES", "label": "Régime des salariés agricoles" },
            { "value": "SECURITE_SOCIALE", "label": "Sécurité sociale" },
            { "value": "SECURITE_SOCIALE_INDEPENDANTS", "label": "Sécurité sociale des indépendants" }
          ]
        },
        {
          "domainKey": "spouse.status",
          "leadKey": "conjoint.statut",
          "label": "Statut (conjoint)",
          "widget": "select",
          "required": false,
          "visibleWhen": { "equals": { "spouse.present": true } },
          "options": [
            { "value": "SALARIE", "label": "Salarié" },
            { "value": "TNS", "label": "TNS" },
            { "value": "FONCTIONNAIRE", "label": "Fonctionnaire" },
            { "value": "RETRAITE", "label": "Retraité" },
            { "value": "LIBERAL", "label": "Libéral" },
            { "value": "INDEPENDANT", "label": "Indépendant" }
          ]
        },
        {
          "domainKey": "spouse.profession",
          "leadKey": "conjoint.profession",
          "label": "Profession (conjoint)",
          "widget": "text",
          "required": false,
          "visibleWhen": { "equals": { "spouse.present": true } }
        }
      ]
    },
    {
      "id": "enfants",
      "title": "Enfants",
      "repeatable": {
        "min": 0,
        "max": 10,
        "itemLabelTemplate": "Enfant #{index}"
      },
      "fields": [
        {
          "domainKey": "children.count",
          "leadKey": "projet.nb_enfants",
          "label": "Nombre d'enfants",
          "widget": "number",
          "required": false,
          "min": 0,
          "max": 10
        },
        {
          "domainKey": "children[].birthDate",
          "leadKey": "enfants[].date_naissance",
          "label": "Date de naissance",
          "widget": "date",
          "required": false,
          "format": "DD/MM/YYYY"
        },
        {
          "domainKey": "children[].regime",
          "leadKey": "enfants[].regime",
          "label": "Régime (enfant)",
          "widget": "select",
          "required": false,
          "options": [
            { "value": "ALSACE_MOSELLE", "label": "Alsace / Moselle" },
            { "value": "AMEXA", "label": "Amexa" },
            { "value": "REGIME_SALARIES_AGRICOLES", "label": "Régime des salariés agricoles" },
            { "value": "SECURITE_SOCIALE", "label": "Sécurité sociale" },
            { "value": "SECURITE_SOCIALE_INDEPENDANTS", "label": "Sécurité sociale des indépendants" }
          ]
        },
        {
          "domainKey": "children[].ayantDroit",
          "leadKey": "enfants[].ayant_droit",
          "label": "Ayant droit",
          "widget": "select",
          "required": false,
          "options": [
            { "value": "CLIENT", "label": "Client" },
            { "value": "CONJOINT", "label": "Conjoint" }
          ]
        }
      ]
    },
    {
      "id": "besoins",
      "title": "Besoins",
      "fields": [
        {
          "domainKey": "needs.assureActuellement",
          "leadKey": "besoin.assureActuellement",
          "label": "Déjà assuré actuellement",
          "widget": "toggle",
          "required": false,
          "default": false
        },
        {
          "domainKey": "needs.niveaux.soinsMedicaux",
          "leadKey": "besoin.soins_medicaux",
          "label": "Soins médicaux",
          "widget": "select",
          "required": false,
          "options": [ {"value":1,"label":"Niveau 1"},{"value":2,"label":"Niveau 2"},{"value":3,"label":"Niveau 3"},{"value":4,"label":"Niveau 4"} ]
        },
        {
          "domainKey": "needs.niveaux.hospitalisation",
          "leadKey": "besoin.hospitalisation",
          "label": "Hospitalisation",
          "widget": "select",
          "required": false,
          "options": [ {"value":1,"label":"Niveau 1"},{"value":2,"label":"Niveau 2"},{"value":3,"label":"Niveau 3"},{"value":4,"label":"Niveau 4"} ]
        },
        {
          "domainKey": "needs.niveaux.optique",
          "leadKey": "besoin.optique",
          "label": "Optique",
          "widget": "select",
          "required": false,
          "options": [ {"value":1,"label":"Niveau 1"},{"value":2,"label":"Niveau 2"},{"value":3,"label":"Niveau 3"},{"value":4,"label":"Niveau 4"} ]
        },
        {
          "domainKey": "needs.niveaux.dentaire",
          "leadKey": "besoin.dentaire",
          "label": "Dentaire",
          "widget": "select",
          "required": false,
          "options": [ {"value":1,"label":"Niveau 1"},{"value":2,"label":"Niveau 2"},{"value":3,"label":"Niveau 3"},{"value":4,"label":"Niveau 4"} ]
        }
      ]
    }
  ]
}
