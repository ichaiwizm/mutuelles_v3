{
  "version": 1,
  "platform": "swisslifeone",
  "slug": "swisslifeone_slsis",
  "name": "SwissLifeOne - SLSIS (Tarification & Simulation) HL",
  "trace": "retain-on-failure",
  "steps": [
    { "type": "goto", "url": "https://www.swisslifeone.fr/", "label": "accueil" },
    { "type": "waitForField", "field": "login_button_home", "label": "wait-login-button" },
    { "type": "clickField", "field": "login_button_home", "label": "click-login-button" },
    { "type": "sleep", "timeout_ms": 2000, "label": "wait-sso-load" },
    { "type": "waitForField", "field": "login_username", "label": "wait-sso-form" },
    { "type": "fillField", "field": "login_username", "value": "{credentials.username}", "label": "fill-user" },
    { "type": "fillField", "field": "login_password", "value": "{credentials.password}", "label": "fill-pass" },
    { "type": "clickField", "field": "login_submit", "label": "submit" },
    { "type": "sleep", "timeout_ms": 5000, "label": "wait-post-login" },
    { "type": "clickField", "field": "cookie_tout_autoriser", "label": "accept-cookies", "optional": true },
    { "type": "sleep", "timeout_ms": 1000, "label": "wait-after-cookies" },

    { "type": "goto", "url": "https://www.swisslifeone.fr/index-swisslifeOne.html#/tarification-et-simulation/slsis", "label": "goto-slsis-page" },
    { "type": "sleep", "timeout_ms": 5000, "label": "wait-slsis-load" },

    { "type": "enterFrame", "selector": "iframe[name='iFrameTarificateur']", "label": "enter-slsis-iframe", "timeout_ms": 10000 },
    { "type": "sleep", "timeout_ms": 2000, "label": "wait-iframe-ready" },

    { "type": "fillField", "field": "slsis_nom_projet", "value": "Projet Test SLSIS", "label": "fill-nom-projet" },
    { "type": "clickField", "field": "slsis_couverture_individuelle_oui", "label": "select-couverture-oui" },
    { "type": "sleep", "timeout_ms": 500, "label": "wait-after-couverture" },
    { "type": "clickField", "field": "slsis_indemnites_journalieres_non", "label": "select-indemnites-non" },
    { "type": "sleep", "timeout_ms": 1000, "label": "wait-final" },

    { "type": "exitFrame", "label": "exit-slsis-iframe" }
  ]
}
